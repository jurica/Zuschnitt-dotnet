@using Zuschnitt.Models

@inject AppState AppState

@if (Column != null)
{
    <FluentCard MinimalStyle="true" Style="padding: 10px; width: 300px" @onmouseenter="HighlightOn" @onmouseleave="HighlightOff" @onfocusin="HighlightOn" @onfocusout="HighlightOff">
        <FluentStack Orientation="Orientation.Vertical">
            <FluentStack Orientation="Orientation.Horizontal" VerticalAlignment="VerticalAlignment.Center">
                <ColumnActions Column="Column"/>
                <FluentLabel Typo="Typography.Header">#@(AppState.SelectedSheet.Columns.IndexOf(@Column) + 1) (@Column.Width()/@Column.Height())</FluentLabel>
            </FluentStack>
            @{
                foreach (var part in Column.Parts)
                {
                    <PartCard Column="Column" Part="part"/>
                }
            }
        </FluentStack>
    </FluentCard>
}

@code {
    [Parameter] public Column? Column { get; set; }

    private void HighlightOn()
    {
        if (Column == null) return;
        Column.Highlighted = true;
        AppState.StateHasChanged();
    }

    private void HighlightOff()
    {
        if (Column == null) return;
        Column.Highlighted = false;
        AppState.StateHasChanged();
    }

}

